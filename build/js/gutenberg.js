!function(){var e={506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}},154:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},t.apply(this,arguments)}e.exports=t},754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},205:function(e,t,n){var o=n(489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},585:function(e,t,n){var o=n(8),r=n(506);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?r(e):t}},489:function(e){function t(n,o){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,o)}e.exports=t},8:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},788:function(){}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.i18n,t=window.wp.blocks,o=n(575),r=n.n(o),l=n(913),i=n.n(l),a=n(506),c=n.n(a),s=n(205),u=n.n(s),p=n(585),f=n.n(p),d=n(754),m=n.n(d),y=window.wp.element,b=window.wp.blockEditor,v=window.wp.components,h=window.wp.data,g=window.lodash,k=[[[12,0,4,0,0],[12,0,8,0,0]],[[12,0,8,0,0],[12,0,4,0,0]],[[12,0,6,0,0],[12,0,6,0,0]],[[12,0,4,0,0],[12,0,4,0,0],[12,0,4,0,0]],[[12,0,8,0,0],[12,0,4,0,0],[12,0,4,0,0],[12,0,8,0,0]]];function z(e){var t=e.layout,n=e.onClick;return(0,y.createElement)("div",{className:"row ized-section-layout-row",onClick:function(){return n(t)}},t.map((function(e){return(0,y.createElement)("div",{className:"col-"+e[2]+" ized-section-layout-col"})})))}function E(e){var t=e.setLayout;function n(e){t({layout:e,columns:e.length,settingLayout:!0})}return(0,y.createElement)("div",{className:"ized-section-layout-container"},k.map((function(e){return(0,y.createElement)("div",{className:"ized-section-layout ized-section-row"},(0,y.createElement)(z,{layout:e,onClick:n}))})))}n(788);var w=(0,h.select)("core/block-editor").getBlocks,B=(0,h.dispatch)("core/block-editor").replaceInnerBlocks,x=function(n){u()(s,n);var o,l,a=(o=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m()(o);if(l){var n=m()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f()(this,e)});function s(){var e;return r()(this,s),(e=a.apply(this,arguments)).ButtonType=e.ButtonType.bind(c()(e)),e.layoutBlocks=e.layoutBlocks.bind(c()(e)),e.setEtat=e.setEtat.bind(c()(e)),e.setLayout=e.setLayout.bind(c()(e)),e.state={layout:!1},e}return i()(s,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){}},{key:"ButtonType",value:function(e){var t=e.typeB,n=this.props,o=n.setAttributes,r="ized-section-type";return n.attributes.type===t&&(r="ized-section-type active"),(0,y.createElement)("span",{className:r,onClick:function(){return o({type:t})}},t)}},{key:"layoutBlocks",value:function(e){var n=this.state.layout,o=w(e);console.log(o);for(var r=0;r<n.length;r++)void 0!==o[r]?o[r].attributes.bootstrapSize=n[r]:o.push((0,t.createBlock)("ized-gutenberg/section-col",{bootstrapSize:n[r]}));if(o.length>n.length){for(var l=!0,i=n.length;i<o.length;i++)o[i].innerBlocks.length>0&&(l=!1);l&&o.splice(n.length)}B(e,o,!1),this.setEtat({layout:!1})}},{key:"setEtat",value:function(e){this.setState(e)}},{key:"setLayout",value:function(e){this.props.attributes.columns=e.columns,console.log(this),this.setState(e)}},{key:"render",value:function(){var t=this.props,n=t.attributes,o=t.className,r=t.clientId,l=t.setAttributes,i=this.state.layout,a=n.columns,c=n.fullWidth,s=o+" ized-section-row";return i&&this.layoutBlocks(r),(0,y.createElement)(y.Fragment,null,(0,y.createElement)(b.InspectorControls,null,(0,y.createElement)(v.PanelBody,null,(0,y.createElement)("div",null,"Type d'élément :"),(0,y.createElement)("div",{className:"ized-section-type-container"},(0,y.createElement)(this.ButtonType,{typeB:"div"}),(0,y.createElement)(this.ButtonType,{typeB:"section"})),(0,y.createElement)(v.ToggleControl,{label:"Full Width",checked:c,onChange:function(e){return l({fullWidth:e})}})),(0,y.createElement)(v.PanelBody,{title:(0,e.__)("Layout","ized-gutenberg")},(0,y.createElement)(E,{setLayout:this.setLayout}))),(0,y.createElement)("div",{className:s},(0,y.createElement)(b.InnerBlocks,{template:(0,g.times)(a,(function(){return["ized-gutenberg/section-col"]})),templateLock:"all",allowedBlocks:["ized-gutenberg/section-col"]})))}}]),s}(y.Component);(0,t.registerBlockType)("ized-gutenberg/section-row",{title:(0,e.__)("Section","ized-gutenberg"),icon:"layout",description:(0,e.__)("Une section pouvant recevoir divers colonnes pour agrémenter vos mise-en-page.","ized-gutenberg"),category:"layout",supports:{html:!1,className:!1},attributes:{className:{type:"string"},type:{type:"string",default:"div"},fullWidth:{type:"boolean",default:!1},columns:{type:"number",default:2}},example:{},edit:x,save:function(e){var t=e.attributes,n="row",o="div";return t.fullWidth&&(n="row full-width"),"section"===t.type&&(o="section"),(0,y.createElement)(o,{className:n},(0,y.createElement)(b.InnerBlocks.Content,null))}});var C=n(154),S=n.n(C),O=window.wp.compose;var _=(0,h.select)("core/block-editor"),N=_.getBlockCount,P=_.getBlockRootClientId,T=(0,h.dispatch)("core/block-editor").removeBlock,I={xs:0,sm:1,md:2,lg:3,xl:4},R=["xs","sm","md","lg","xl"],j=function(t){u()(a,t);var n,o,l=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m()(n);if(o){var r=m()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f()(this,e)});function a(){var e;return r()(this,a),(e=l.apply(this,arguments)).BootstrapSizeMenu=e.BootstrapSizeMenu.bind(c()(e)),e.setEtat=e.setEtat.bind(c()(e)),e.setSize=e.setSize.bind(c()(e)),e.removeCol=e.removeCol.bind(c()(e)),e.state={allSize:!1,allOrder:!1},e}return i()(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){}},{key:"setEtat",value:function(e){this.setState(e)}},{key:"setSize",value:function(e){var t,n,o=e.size,r=e.col,l=e.type,i=this.props,a=i.attributes,c=i.setAttributes,s=a.bootstrapSize,u=a.bootstrapOffset,p=[];switch(l){case"col":n=s;break;case"order":n=u}t=I[o];for(var f=0;f<n.length;f++)f===t?p.push(r):p.push(n[f]);"col"===l&&c({bootstrapSize:p}),"order"===l&&c({bootstrapOffset:p})}},{key:"BootstrapSizeMenu",value:function(e){var t,n=this,o=e.size,r=e.type,l=this.props.attributes,i=l.bootstrapSize,a=l.bootstrapOffset,c=[{label:"auto",value:0}];t=I[o];for(var s="col"===r?i[t]:a[t],u=0;u<12;u++)c.push({label:u+1,value:u+1});return(0,y.createElement)("div",{className:"ized-bootstrap-size"},(0,y.createElement)("div",{className:"ized-bootstrap-size-label"},o),(0,y.createElement)(v.SelectControl,{value:s,className:"ized-bootstrap-size-select",options:c,onChange:function(e){return n.setSize({size:o,col:parseInt(e),type:r})}}))}},{key:"removeCol",value:function(){var e=this.props.clientId,t=P(e),n=N(t);n--,T(0===n?t:e)}},{key:"render",value:function(){var t=this,n=this.props,o=n.clientId,r=(n.setAttributes,n.attributes,this.state),l=r.allSize,i=r.allOrder,a=N(o)>0,c=l?["xs","sm","md","lg","xl"]:["xs","md","xl"],s=i?["xs","sm","md","lg","xl"]:["xs","md","xl"];return(0,y.createElement)(y.Fragment,null,(0,y.createElement)(b.BlockControls,null,(0,y.createElement)(v.Toolbar,null,(0,y.createElement)(v.Button,{icon:"minus",label:(0,e.__)("supprimer la colonne"),onClick:this.removeCol,className:""}))),(0,y.createElement)(b.InspectorControls,null,(0,y.createElement)(v.PanelBody,{title:(0,e.__)("Column Size")},c.map((function(e){return(0,y.createElement)(t.BootstrapSizeMenu,{type:"col",size:e})})),(0,y.createElement)(v.CheckboxControl,{label:"Toutes les tailles",checked:l,onChange:function(e){return t.setEtat({allSize:e})}})),(0,y.createElement)(v.PanelBody,{title:(0,e.__)("Column Order")},s.map((function(e){return(0,y.createElement)(t.BootstrapSizeMenu,{type:"order",size:e})})),(0,y.createElement)(v.CheckboxControl,{label:"Toutes les tailles",checked:i,onChange:function(e){return t.setEtat({allOrder:e})}}))),(0,y.createElement)("div",null,(0,y.createElement)(b.InnerBlocks,{templateLock:!1,renderAppender:a?void 0:function(){return(0,y.createElement)(b.InnerBlocks.ButtonBlockAppender,null)}})))}}]),a}(y.Component),L=(0,O.createHigherOrderComponent)((function(e){return function(t){if("ized-gutenberg/section-col"===t.name){var n=t.attributes,o=n.bootstrapSize,r=n.bootstrapOffset,l="";return o&&(l="col-md-"+o[2]),r&&0!==r[2]&&(l+=" order-md-"+r[2]),(0,y.createElement)(e,S()({},t,{className:l}))}return(0,y.createElement)(e,t)}}),"HOCbootstrap");(0,t.registerBlockType)("ized-gutenberg/section-col",{title:(0,e.__)("Colonne","ized-gutenberg"),parent:["ized-gutenberg/section-row"],description:(0,e.__)("Une colonne avec pleins de propriétés","ized-gutenberg"),icon:"archive",category:"layout",supports:{inserter:!1,reusable:!1,html:!1,className:!1},attributes:{className:{type:"string"},bootstrapSize:{type:"array",default:[12,0,6,0,0]},bootstrapOffset:{type:"array",default:[0,0,0,0,0]}},example:{},edit:j,save:function(e){var t=e.attributes,n=t.bootstrapSize,o=t.bootstrapOffset,r="";function l(e,t){e.map((function(e,n){e>0&&(r+=" "+(0==n?t:t+R[n]+"-")+e)}))}return l(n,"col-"),l(o,"order-"),e.className&&(r+=" "+e.className),(0,y.createElement)("div",{className:r},(0,y.createElement)(b.InnerBlocks.Content,null))}}),wp.hooks.addFilter("editor.BlockListBlock","ized-gutenberg/section-col",L)}()}();